<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Berlin Brandenburgische Akademie der Wissenschaften - Digitaler Wissensspeicher: CMS services</title>
  </head>
<body>
<h2>Berlin Brandenburgische Akademie der Wissenschaften - Digitaler Wissensspeicher: CMS services</h2>

<ul>
  <li><b>Url: /wspCmsWebApp/doc/GetDocument</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>id (required)
            <ul>
              <li>resource identifier, e.g. "/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml"</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Example: <a href="doc/GetDocument?id=/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml">Get test document</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><b>Url: /wspCmsWebApp/doc/DocumentOperation</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>srcUrl (optional)
            <ul>
              <li>source url of resource (if operation is create)</li>
            </ul>
          </li>
          <li>docId (required)
            <ul>
              <li>resource identifier, e.g. "/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml"</li>
            </ul>
          </li>
          <li>elementNames (optional)
            <ul>
              <li>list of xml element names which should be indexed</li>
              <li>default: "p s head"</li>
            </ul>
          </li>
          <li>operation (required)
            <ul>
              <li>create</li>
              <li>delete</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Link to job</li>
          <li>Example: <a href="doc/DocumentOperation?srcUrl=http://telota.bbaw.de:8085/exist/rest/db/AvHBriefedition/Briefe/Dok280E18xml.xml&docId=/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml&operation=create">Create test resource</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/GetPage</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>resource identifier, e.g. "/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml"</li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>page number in resource</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>normalization (optional)
            <ul>
              <li>orig (original)</li>
              <li>reg (regularized)</li>
              <li>norm (regularized and normalized)</li>
              <li>default: norm</li>
            </ul>
          </li>
          <li>highlightQuery (optional)
            <ul>
              <li>Lucene query string for which words should be highlighted</li>
              <li>default: empty</li>
            </ul>
          </li>
          <li>highlightQueryType (optional)
            <ul>
              <li>form (form)</li>
              <li>morph (morphological)</li>
              <li>default: form</li>
            </ul>
          </li>
          <li>highlightElem (optional)
            <ul>
              <li>element name which should be highlighted</li>
              <li>default: empty</li>
            </ul>
          </li>
          <li>highlightElemPos (optional)
            <ul>
              <li>element position which should be highlighted</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>mode (optional)
            <ul>
              <li>untokenized</li>
              <li>tokenized (page result is enriched with word elements: e.g. &lt;w lang="deu" form="satz" formRegularized="satz" formNormalized="satz" forms="satz, sätze, satzes" lemmas="satz"&gt;Satz&lt;/w&gt;)</li>
              <li>default: untokenized</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>html</li>
              <li>xml (pure xml)</li>
              <li>xmlDisplay (xml like display through html)</li>
              <li>default: html</li>
            </ul>
          </li>
          <li>cssUrl (optional)
            <ul>
              <li>url of css file</li>
              <li>default: <a href="css/page.css">/mpiwg-mpdl-cms-web/css/page.css</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Page of resource</li>
          <li>Example: <a href="query/GetPage?docId=/test/test/Test_1789.xml">Page 1 in test resource</a></li>
          <li>Example: <a href="query/GetPage?docId=/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml">Page 1 in Humboldt - Ehrenberg letter</a></li>
          <li>Example: <a href="query/GetPage?docId=/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml&mode=tokenized">Page 1 in Humboldt - Ehrenberg letter, tokenized</a></li>
          <li>Example: <a href="query/GetPage?docId=/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml&mode=tokenized&highlightQueryType=norm&highlightQuery=tokenMorph:ist">Page 1 in in Humboldt - Ehrenberg letter, tokenized, morphological forms of "ist" are highlighted</a></li>
          <li>Example: <a href="query/GetPage?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&page=13">Page 13 in MEGA resource</a></li>
          <li>Example: <a href="query/GetPage?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&page=13&mode=tokenized">Page 13 in in MEGA resource, tokenized</a></li>
          <li>Example: <a href="query/GetPage?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&page=13&highlightElem=p&highlightElemPos=1">Page 13 in MEGA resource, first paragraph highlighted</a></li>
          <li>Example: <a href="query/GetPage?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&page=13&outputFormat=xmlDisplay&highlightElem=p&highlightElemPos=1">Page 13 in MEGA resource, first paragraph highlighted (XML output)</a></li>
          <li>Example: <a href="query/GetPage?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&page=13&highlightQueryType=norm&highlightQuery=tokenMorph:ist">Page 13 in MEGA resource, morphological forms of "ist" are highlighted</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/QueryDocuments</b>
    <ul>
      <li>Experimental: <a href="query/index.html">Web query interface</a></li>
      <li>Request parameters
        <ul>
          <li>query (required)
            <ul>
              <li>Lucene query (e.g. +title:marie* +tokenMorph:gebrauchen +tokenMorph:schmutzig)
	            <ul>
	              <li>supported fields
	                <ul>
	                  <li>docId (local id: resource identifier in index system, e.g. "/edoc/2011/1591/pdf/08_VI.Dokumente.pdf")</li>
	                  <li>identifier (local id: identifier field in resources metadata: e.g. "47114711")</li>
	                  <li>uri (global id: resource URI (uniform resource identifier), e.g. http://de.wikipedia.org/wiki/Ramones)</li>
	                  <li>webUri (global web url, e.g. "http://edoc.bbaw.de/volltexte/2011/1769/")</li>
	                  <li>collectionNames (project name(s), e.g. "edoc" or "ig")</li>
	                  <li>schemaName (schema name of resource, e.g. TEI, html, quran etc.)</li>
	                  <li>author (author(s) of resource)</li>
	                  <li>title (title(s) of resource)</li>
	                  <li>language (language: ISO 639-3 specifier with 3 characters, e.g. "ger" or "eng")</li>
	                  <li>publisher (publisher(s) with place(s), e.g. Springer, New York )</li>
	                  <li>date (publication date, e.g. 1958)</li>
	                  <li>description (description, abstract etc.)</li>
	                  <li>subject (free subject keywords)</li>
	                  <li>ddc (subject keywords from DDC (Dewey Decimal Classification), e.g. "Philosophie")</li>
	                  <li>swd (subject keywords from SWD (Schlagwortnormdatei), normally separated by commas)</li>
	                  <li>persons (main persons in resource)</li>
	                  <li>places (main places in resource)</li>
	                  <li>type (mime type: e.g. text/xml)</li>
	                  <li>rights (rights string, e.g. open access)</li>
	                  <li>license (license string, e.g. "CC-BY-SA"))</li>
	                  <li>accessRights (access rights string, e.g. free)</li>
	                  <li>lastModified (last modification date in index system)</li>
	                  <li>pageCount (number of pages)</li>
	                  <li>tokenOrig (original fulltext tokens of resource)</li>
	                  <li>tokenReg (regularized fulltext tokens of resource)</li>
	                  <li>tokenNorm (normalized fulltext tokens of resource)</li>
	                  <li>tokenMorph (morphological base forms of fulltext tokens of resource)</li>
	                  <li>content (original text content of the resources file (without xml tags))</li>
	                  <li>default: tokenOrig</li>
		            </ul>
		          </li>
	            </ul>
	          </li>
            </ul>
          </li>
          <li>sortBy (optional)
            <ul>
              <li>fieldNames separated by blank
              <ul>
                <li>supported fields
                  <ul>
                  <li>docId</li>
                  <li>schemaName</li>
                  <li>language</li>
                  <li>author</li>
                  <li>title</li>
                  <li>publisher</li>
                  <li>date</li>
                  <li>lastModified</li>
                </ul>
              </li>
              <li>default: result is sorted by Lucene score (the most relevant result first)</li>
              </ul>
            </li>
            </ul>
          </li>
          <li>language (optional)
            <ul>
              <li>ISO 639-3 specifier</li>
              <li>default: automatically derived from query</li>
            </ul>
          </li>
          <li>translate (optional)
            <ul>
              <li>expansion of the query: translation of the query terms to other languages</li>
              <li>true</li>
              <li>false</li>
              <li>default: false</li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>result page number</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>pageSize (optional)
            <ul>
              <li>result page size</li>
              <li>default: 10</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>html</li>
              <li>json</li>
              <li>default: html</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Resources matching the query</li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:körper">all resources which contains "körper" in original content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:καὶ">all resources which contains "καὶ" in original content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:haus">all resources which contains "haus" in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:haus&translate=true">all resources which contains translated "haus" in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenMorph:haus">all resources which morphological contains "haus" in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenMorph:house&translate=true">all resources which morphological contains translated "house" in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenMorph:ist">all resources which morphological contains translated "ist" in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenMorph:sur&translate=true">all resources which morphological contains translated "sur" in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:&quot;durch grössere stoffliche Fülle&quot;">Phrase query: all resources which contains "durch grössere stoffliche Fülle"</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:&quot;durch Fülle&quot;~4">Near by: all resources which contains "durch" und "Fülle" within 4 words of each other in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=%2Bauthor:alex* %2Btitle:ehren*">Metadata query: all resources which contains "alex*" in author and "ehren*" in title</a></li>
          <li>Example: <a href="query/QueryDocuments?query=*&sortBy=author">Browse: all resources</a></li>
          <li>Example: <a href="query/QueryDocuments?query=%2Blanguage:ger">Browse: all german resources</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/QueryDocument</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>resource identifier (e.g. "/tei/de/Marie_1969-12-13.xml"</li>
            </ul>
          </li>
          <li>query (required)
            <ul>
              <li>Lucene query (e.g. +tokenMorph:gebrauchen +tokenMorph:schmutzig)
	            <ul>
	              <li>supported fields
	                <ul>
		              <li>language (language: ISO 639-3 specifier with 3 characters, e.g. "ger" or "eng")</li>
		              <li>pageNumber (page number of node in resource)</li>
		              <li>lineNumber (line number of node in resource)</li>
		              <li>elementName (element name of node, e.g. "s")</li>
		              <li>elementPosition (position of node)</li>
		              <li>elementAbsolutePosition (absolute position of node)</li>
		              <li>elementPagePosition (position of node on page)</li>
		              <li>xmlId (xml id of node)</li>
		              <li>xpath (xpath of node, e.g. "/TEI[1]/text[1]/p[1]/s[5]")</li>
		              <li>tokenOrig (original fulltext tokens of node)</li>
		              <li>tokenReg (regularized fulltext tokens of node)</li>
		              <li>tokenNorm (normalized fulltext tokens of node)</li>
		              <li>tokenMorph (morphological base forms of fulltext tokens of node)</li>
		              <li>default: tokenOrig</li>
		            </ul>
		          </li>
	            </ul>
	          </li>
            </ul>
          </li>
          <li>language (optional)
            <ul>
              <li>ISO 639-3 specifier</li>
              <li>default: automatically derived from query</li>
            </ul>
          </li>
          <li>translate (optional)
            <ul>
              <li>automatic translation of the query</li>
              <li>default: false</li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>result page number</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>pageSize (optional)
            <ul>
              <li>result page size</li>
              <li>default: 10</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>html</li>
              <li>default: xml</li>
            </ul>
          </li>
          <li>addInf (optional)
            <ul>
              <li>additional information in output (e.g. persons, places, etc.)</li>
              <li>true</li>
              <li>false</li>
              <li>default: false</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>nodes in resource which matches the query, hits are highlighted</li>
          <li>Example: <a href="query/QueryDocument?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&query=tokenOrig:körper">in /mega/docs/MEGA_A2_B001-01_ETX.xml: all nodes which contains "körper" in original content (XML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&query=tokenOrig:körper&outputFormat=html">in /mega/docs/MEGA_A2_B001-01_ETX.xml: all nodes which contains "körper" in original content (HTML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&query=tokenMorph:bin&outputFormat=html">in /mega/docs/MEGA_A2_B001-01_ETX.xml: all nodes which contains morphological "bin" in content (HTML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&query=tokenMorph:später&outputFormat=html">in /mega/docs/MEGA_A2_B001-01_ETX.xml: all nodes which contains morphological "später" in content (HTML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/test/test/Test_1789.xml&query=tokenOrig:sentence&outputFormat=html">in /test/test/Test_1789.xml: all nodes which contains "sentence" in original content (HTML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&query=elementName:p">in /mega/docs/MEGA_A2_B001-01_ETX.xml: all p elements (XML output)</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /mpiwg-mpdl-cms-web/query/XQueryDocument</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>resource identifier (e.g. "/test/test/Test_1789.xml"</li>
            </ul>
          </li>
          <li>query (required)
            <ul>
              <li><a href="http://www.saxonica.com/documentation/javadoc/net/sf/saxon/s9api/package-summary.html">Saxon's</a> <a href="http://www.w3.org/TR/xquery">XQuery</a>/<a href="http://www.w3.org/TR/xpath20">XPath</a></li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>result page number</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>pageSize (optional)
            <ul>
              <li>result page size</li>
              <li>default: 10</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>html</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Example: <a href="query/XQueryDocument?docId=/test/test/Test_1789.xml&query=count(//*:s)">in /test/test/Test_1789.xml: count all sentences (XML output)</a></li>
          <li>Example: <a href="query/XQueryDocument?docId=/test/test/Test_1789.xml&query=//*:s">in /test/test/Test_1789.xml: all sentences (XML output)</a></li>
          <li>Example: <a href="query/XQueryDocument?docId=/test/test/Test_1789.xml&query=//*:note[@n = 1 or @n=2]&outputFormat=html">in /test/test/Test_1789.xml: note with number 1 or 2 (HTML output)</a></li>
          <li>Example: <a href="query/XQueryDocument?docId=/test/test/Test_1789.xml&query=//*:note/@n">in /test/test/Test_1789.xml: "n" attributes of all notes (XML output)</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/MoreLikeThis</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>resource identifier (e.g. "/tei/de/Marie_1969-12-13.xml"</li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>result page number</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>pageSize (optional)
            <ul>
              <li>result page size</li>
              <li>default: 10</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>html</li>
              <li>json</li>
              <li>default: html</li>
            </ul>
          </li>
          <li>addInf (optional)
            <ul>
              <li>result with additional information such as person names etc.</li>
              <li>true</li>
              <li>false</li>
              <li>default: false</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Similar resources of resources with that id</li>
          <li>Example: <a href="query/MoreLikeThis?docId=/MEGA/mega/docs/MEGA_A2_B004-01_ETX.xml">similar resources of "/MEGA/mega/docs/MEGA_A2_B004-01_ETX.xml"</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/GetToken</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (optional)
            <ul>
              <li>resource identifier (e.g. "/mega/docs/MEGA_A2_B001-01_ETX.xml"</li>
            </ul>
          </li>
          <li>attribute (optional)
            <ul>
              <li>see below: supported fields in /wspCmsWebApp/query/QueryDocuments</li>
            </ul>
          </li>
          <li>query (optional)
            <ul>
              <li>beginning characters of token (e.g. "a")</li>
              <li>default: empty (beginning alphabetically at first position in all tokens)</li>
            </ul>
          </li>
          <li>count (optional)
            <ul>
              <li>count of tokens</li>
              <li>default: 100</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Tokens of the attribute</li>
          <li>Example: <a href="query/GetToken?attribute=docId">all token in docId field (starting from beginning)</a></li>
          <li>Example: <a href="query/GetToken?docId=/MEGA/mega/docs/MEGA_A2_B001-01_ETX.xml&attribute=tokenMorph&query=a">in /mega/docs/MEGA_A2_B001-01_ETX.xml: all token beginning with "a" in morphological content (starting from "a")</a></li>
          <li>Example: <a href="query/GetToken?attribute=tokenMorph&query=a">in all resources: all token beginning with "a" in morphological content (starting from "a")</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/GetDocInfo</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>resource identifier (e.g. "/mega/docs/MEGA_A2_B001-01_ETX.xml"</li>
            </ul>
          </li>
          <li>field (optional)
            <ul>
              <li>see below: all supported fields in /wspCmsWebApp/query/QueryDocuments</li>
              <li>toc (table of contents)</li>
              <li>figures</li>
              <li>pages</li>
              <li>default: null (all fields except automatic generated lists such as toc, figures, etc.)</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Meta info of resource</li>
          <li>Example: <a href="query/GetDocInfo?docId=/AvH/AvHBriefedition/Briefe/Dok280E18xml.xml">Meta info of resource /AvH/AvHBriefedition/Briefe/Dok280E18xml.xml</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/doc/GetDocumentJobs</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>id (optional)
            <ul>
              <li>id of the resource job</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>all resource jobs (when parameter id is not set) or resource job with the specified id</li>
          <li>Example: <a href="doc/GetDocumentJobs">get all resource jobs</a></li>
        </ul>
      </li>
    </ul>
  </li>

</ul>   
 
</body></html>