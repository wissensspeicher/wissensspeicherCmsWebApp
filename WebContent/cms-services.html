<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Berlin Brandenburgische Akademie der Wissenschaften - Digitaler Wissensspeicher: CMS services</title>
  </head>
<body>
<h2>Berlin Brandenburgische Akademie der Wissenschaften - Digitaler Wissensspeicher: CMS services</h2>

<ul>
  <li><b>Url: /wspCmsWebApp/doc/DocumentOperation</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>srcUrl (optional)
            <ul>
              <li>url of the source document (if operation is create or update)</li>
            </ul>
          </li>
          <li>docId (required)
            <ul>
              <li>document identifier of the document (e.g. "/tei/de/Marie_1969-12-13.xml")</li>
            </ul>
          </li>
          <li>elementNames (optional)
            <ul>
              <li>list of xml element names which should be indexed</li>
              <li>default: "s head caption variables description"</li>
            </ul>
          </li>
          <li>operation (required)
            <ul>
              <li>get</li>
              <li>create</li>
              <li>update</li>
              <li>delete</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Link to document job</li>
          <li>Example: <a href="doc/DocumentOperation?srcUrl=http://mpdl-system.mpiwg-berlin.mpg.de/mpdl/getDoc?doc=/tei/de/dt-ptolemaeus-tei-merge2.xml&docId=/tei/de/dt-ptolemaeus-tei-merge2.xml&operation=update">Update test document</a></li>
          <li>Example: <a href="doc/DocumentOperation?docId=/tei/de/dt-ptolemaeus-tei-merge2.xml&operation=get">Get test document</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/GetPage</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>document identifier of the document (e.g. "/tei/de/Marie_1969-12-13.xml")</li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>page number in document</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>normalization (optional)
            <ul>
              <li>orig (original)</li>
              <li>reg (regularized)</li>
              <li>norm (regularized and normalized)</li>
              <li>default: norm</li>
            </ul>
          </li>
          <li>highlightQuery (optional)
            <ul>
              <li>Lucene query string for which words should be highlighted</li>
              <li>default: empty</li>
            </ul>
          </li>
          <li>highlightQueryType (optional)
            <ul>
              <li>form (form)</li>
              <li>morph (morphological)</li>
              <li>default: form</li>
            </ul>
          </li>
          <li>highlightElem (optional)
            <ul>
              <li>element name which should be highlighted</li>
              <li>default: empty</li>
            </ul>
          </li>
          <li>highlightElemPos (optional)
            <ul>
              <li>element position which should be highlighted</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>mode (optional)
            <ul>
              <li>untokenized</li>
              <li>tokenized (page result is enriched with word elements: e.g. &lt;w lang="deu" form="satz" formRegularized="satz" formNormalized="satz" forms="satz, sätze, satzes" lemmas="satz"&gt;Satz&lt;/w&gt;)</li>
              <li>default: untokenized</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>html</li>
              <li>default: html</li>
            </ul>
          </li>
          <li>cssUrl (optional)
            <ul>
              <li>url of css file</li>
              <li>default: <a href="css/page.css">/mpiwg-mpdl-cms-web/css/page.css</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Document page</li>
          <li>Example: <a href="query/GetPage?docId=/echo/de/Adams_1785_S7ECRGW8.xml&page=128">Page 128 in Adams document</a></li>
          <li>Example: <a href="query/GetPage?docId=/echo/de/Adams_1785_S7ECRGW8.xml&page=128&mode=tokenized">Page 128 in Adams document, tokenized</a></li>
          <li>Example: <a href="query/GetPage?docId=/echo/de/Adams_1785_S7ECRGW8.xml&page=128&mode=tokenized&highlightQueryType=norm&highlightQuery=tokenMorph:halt">Page 128 in Adams document, tokenized, morphological forms of "halt" are highlighted</a></li>
          <li>Example: <a href="query/GetPage?docId=/echo/la/Benedetti_1585.xml&page=13">Page 13 in Benedetti document</a></li>
          <li>Example: <a href="query/GetPage?docId=/echo/la/Benedetti_1585.xml&page=13&mode=tokenized">Page 13 in Benedetti document, tokenized</a></li>
          <li>Example: <a href="query/GetPage?docId=/echo/la/Benedetti_1585.xml&page=13&highlightElem=s&highlightElemPos=1">Page 13 in Benedetti document, first sentence highlighted</a></li>
          <li>Example: <a href="query/GetPage?docId=/echo/la/Benedetti_1585.xml&page=13&normalization=reg&highlightQuery=tokenReg:relatiuum">Page 13 in Benedetti document, regularized form "relatiuum" is highlighted</a></li>
          <li>Example: <a href="query/GetPage?docId=/echo/la/Benedetti_1585.xml&page=13&highlightQueryType=norm&highlightQuery=tokenMorph:praeclarus">Page 13 in Benedetti document, morphological forms of "praeclarus" are highlighted</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/QueryDocuments</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>query (required)
            <ul>
              <li>Lucene query (e.g. +title:marie* +tokenMorph:gebrauchen +tokenMorph:schmutzig)
	            <ul>
	              <li>supported fields
	                <ul>
		              <li>docId</li>
		              <li>identifier</li>
		              <li>author</li>
		              <li>title</li>
		              <li>language</li>
		              <li>date</li>
		              <li>rights</li>
		              <li>license</li>
		              <li>accessRights</li>
		              <li>tokenOrig</li>
		              <li>tokenReg</li>
		              <li>tokenNorm</li>
		              <li>tokenMorph</li>
		              <li>default: tokenOrig</li>
		            </ul>
		          </li>
	            </ul>
	          </li>
            </ul>
          </li>
          <li>language (optional)
            <ul>
              <li>ISO 639-3 specifier</li>
              <li>default: automatically derived from query</li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>result page number</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>pageSize (optional)
            <ul>
              <li>result page size</li>
              <li>default: 10</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Documents matching the query</li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:tempore">all documents which contains "tempore" in original content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenOrig:relatiuũ">all documents which contains "relatiuũ" in original content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenReg:relatiuum">all documents which contains "relatiuum" in regularized content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenNorm:relativum">all documents which contains "relativum" in normalized content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenMorph:praeclarus">all documents which morphological contains "praeclarus" in content</a></li>
          <li>Example: <a href="query/QueryDocuments?query=tokenMorph:schmutziges">all documents which morphological contains "schmutziges" in content (language is automatically detected)</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/QueryDocument</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>document identifier (e.g. "/tei/de/Marie_1969-12-13.xml"</li>
            </ul>
          </li>
          <li>query (required)
            <ul>
              <li>Lucene query (e.g. +tokenMorph:gebrauchen +tokenMorph:schmutzig)
	            <ul>
	              <li>supported fields
	                <ul>
		              <li>identifier</li>
		              <li>language</li>
		              <li>pageNumber</li>
		              <li>lineNumber</li>
		              <li>elementName</li>
		              <li>elementPosition</li>
		              <li>elementAbsolutePosition</li>
		              <li>elementPagePosition</li>
		              <li>xmlId</li>
		              <li>xpath</li>
		              <li>tokenOrig</li>
		              <li>tokenReg</li>
		              <li>tokenNorm</li>
		              <li>tokenMorph</li>
		              <li>default: tokenOrig</li>
		            </ul>
		          </li>
	            </ul>
	          </li>
            </ul>
          </li>
          <li>page (optional)
            <ul>
              <li>result page number</li>
              <li>default: 1</li>
            </ul>
          </li>
          <li>pageSize (optional)
            <ul>
              <li>result page size</li>
              <li>default: 10</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>html</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>nodes in document which matches the query, word tokens are extracted and hits are highlighted</li>
          <li>Example: <a href="query/QueryDocument?docId=/echo/la/Benedetti_1585.xml&query=tokenOrig:tempore">in /echo/la/Benedetti_1585.xml: all nodes which contains "tempore" in original content (XML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/echo/la/Benedetti_1585.xml&query=tokenOrig:tempore&outputFormat=html">in /echo/la/Benedetti_1585.xml: all nodes which contains "tempore" in original content (HTML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/echo/la/Benedetti_1585.xml&query=tokenReg:relatiuum">in /echo/la/Benedetti_1585.xml: all nodes which contains "relatiuum" in regularized content (XML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/echo/la/Benedetti_1585.xml&query=tokenMorph:praeclarus&outputFormat=html">in /echo/la/Benedetti_1585.xml: all nodes which contains morphological "praeclarus" in content (HTML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/tei/en/Test_1789.xml&query=tokenOrig:sentence&outputFormat=html">in /tei/en/Test_1789.xml: all nodes which contains "sentence" in original content (HTML output)</a></li>
          <li>Example: <a href="query/QueryDocument?docId=/tei/de/Marie_1969-12-13.xml&query=elementName:p">in /tei/de/Marie_1969-12-13.xml: all p elements (XML output)</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/GetToken</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (optional)
            <ul>
              <li>document identifier (e.g. "/tei/de/Marie_1969-12-13.xml"</li>
            </ul>
          </li>
          <li>attribute (optional)
            <ul>
              <li>identifier</li>
              <li>author</li>
              <li>title</li>
              <li>language</li>
              <li>date</li>
              <li>rights</li>
              <li>license</li>
              <li>accessRights</li>
              <li>tokenOrig</li>
              <li>tokenReg</li>
              <li>tokenNorm</li>
              <li>tokenMorph</li>
              <li>default: tokenOrig</li>
            </ul>
          </li>
          <li>query (optional)
            <ul>
              <li>beginning characters of token (e.g. "a")</li>
              <li>default: empty (beginning alphabetically at first position in all tokens)</li>
            </ul>
          </li>
          <li>count (optional)
            <ul>
              <li>count of tokens</li>
              <li>default: 100</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Tokens of the attribute</li>
          <li>Example: <a href="query/GetToken?attribute=docId">all token in docId field (starting from beginning)</a></li>
          <li>Example: <a href="query/GetToken?docId=/echo/la/Benedetti_1585.xml&attribute=tokenMorph&query=a">in /echo/la/Benedetti_1585.xml: all token beginning with "a" in morphological content (starting from "a")</a></li>
          <li>Example: <a href="query/GetToken?attribute=tokenMorph&query=a">in all documents: all token beginning with "a" in morphological content (starting from "a")</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/GetDocInfo</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>docId (required)
            <ul>
              <li>document identifier (e.g. "/tei/de/Marie_1969-12-13.xml"</li>
            </ul>
          </li>
          <li>field (optional)
            <ul>
              <li>author</li>
              <li>title</li>
              <li>language</li>
              <li>date</li>
              <li>rights</li>
              <li>license</li>
              <li>accessRights</li>
              <li>countPages</li>
              <li>lastModified</li>
              <li>schema</li>
              <li>echoId</li>
              <li>toc (table of contents)</li>
              <li>figures</li>
              <li>handwrittens</li>
              <li>default: null (all fields except automatic generated lists such as toc, figures, etc.)</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>Meta info of the document</li>
          <li>Example: <a href="query/GetDocInfo?docId=/echo/la/Benedetti_1585.xml">Meta info of document /echo/la/Benedetti_1585.xml</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/doc/GetDocumentJobs</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>id (optional)
            <ul>
              <li>id of the document job</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>all document jobs (when parameter id is not set) or document job with the specified id</li>
          <li>Example: <a href="doc/GetDocumentJobs">get all document jobs</a></li>
        </ul>
      </li>
    </ul>
  </li>

  <li><b>Url: /wspCmsWebApp/query/QueryDocumentByXsl</b>
    <ul>
      <li>Request parameters
        <ul>
          <li>srcUrl (required)
            <ul>
              <li>source URL of XML document</li>
            </ul>
          </li>
          <li>query (required)
            <ul>
              <li>regular expression (based on XSL function "<a href="http://www.w3.org/TR/xpath-functions-30/#string.match">matches</a>")</li>
            </ul>
          </li>
          <li>regular expression flags (optional)
            <ul>
              <li>s (single line mode)</li>
              <li>m (multi line mode)</li>
              <li>i (case insensitive)</li>
              <li>x (whitespace characters (#x9, #xA, #xD and #x20) in the regular expression are removed prior to matching)</li>
              <li>q (all characters in the regular expression are treated as representing themselves, not as meta characters)</li>
            </ul>
          </li>
          <li>outputFormat (optional)
            <ul>
              <li>xml</li>
              <li>html</li>
              <li>default: xml</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Response output
        <ul>
          <li>XML nodes of the document (s and head nodes) which match the given regular expression</li>
          <li>Example: <a href="query/QueryDocumentByXsl?srcUrl=http://mpdl-system.mpiwg-berlin.mpg.de/mpdl/getDoc?doc=/archimedes/la/achil_propo_087_la_1545.xml&query=proportio&outputFormat=html">all sentences which contains "proportio"</a></li>
        </ul>
      </li>
    </ul>
  </li>

</ul>   
 
</body></html>